// ============================================
// 到校服務模組 - 收據
// ============================================

/// 到校收據/收款記錄
model SchoolReceipt {
  id String @id @default(cuid())

  schoolId String
  school   School @relation(fields: [schoolId], references: [id], onDelete: Cascade)

  invoiceId String        @unique // 一張發票對應一張收據
  invoice   SchoolInvoice @relation(fields: [invoiceId], references: [id], onDelete: Cascade)

  // 收據編號
  receiptNumber String  @unique // 收據編號（自動生成）
  paymentNumber String? // 付款編號

  // 收據進度
  receiptProgress String? // 收據進度

  // 付款資料
  paymentConfirmedDate     DateTime? // 付款確認日期
  actualReceivedAmount     Decimal?       @db.Decimal(10, 2) // 實際收款金額
  paymentMethod            PaymentMethod? // 付款方式
  paymentStatus            PaymentStatus  @default(PENDING) // 付款狀態
  paymentTransactionNumber String? // 交易編號/支票號碼

  // 備註
  receiptRemarks String? @db.Text

  // 系統欄位
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?

  @@index([schoolId])
  @@index([invoiceId])
  @@index([paymentStatus])
  @@index([receiptNumber])
  @@map("school_receipts")
}
