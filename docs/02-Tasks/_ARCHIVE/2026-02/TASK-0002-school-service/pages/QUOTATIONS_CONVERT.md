# ğŸ”„ è½‰æ›ç‚ºèª²ç¨‹ - Quotations Convert

> **è·¯å¾‘**: `/dashboard/school/quotations/[id]/convert`  
> **å„ªå…ˆç´š**: P0  
> **è§’è‰²**: ADMIN

---

## ğŸ“‹ é é¢æ¦‚è¿°

å°‡å·²æ¥å—çš„å ±åƒ¹é …ç›®è½‰æ›ç‚ºå¯¦éš›èª²ç¨‹ã€‚å¯é€ä¸€èª¿æ•´èª²ç¨‹ç´°ç¯€ï¼Œæ”¯æ´æ‰¹æ¬¡å»ºç«‹å¤šå€‹èª²ç¨‹ã€‚

---

## ğŸ¨ é é¢çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”„ è½‰æ›ç‚ºèª²ç¨‹                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“„ åŸå ±åƒ¹è³‡æ–™ï¼ˆå”¯è®€ï¼‰   â”‚ â”‚ ğŸ“š å»ºç«‹èª²ç¨‹              â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚                          â”‚   â”‚
â”‚  â”‚ å ±åƒ¹ç·¨è™Ÿï¼šQ2024-003     â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ å­¸æ ¡ï¼šè–ä¿ç¾…å°å­¸        â”‚ â”‚ â”‚ èª²ç¨‹ 1               â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚   â”‚
â”‚  â”‚ å ±åƒ¹é …ç›®ï¼š              â”‚ â”‚ â”‚ èª²ç¨‹åç¨± *           â”‚ â”‚   â”‚
â”‚  â”‚ 1. å°å­¸èŠ±å¼è·³ç¹©åˆç­     â”‚ â”‚ â”‚ [å°å­¸èŠ±å¼è·³ç¹©åˆç­__] â”‚ â”‚   â”‚
â”‚  â”‚    - 24 å ‚              â”‚ â”‚ â”‚                      â”‚ â”‚   â”‚
â”‚  â”‚    - HK$ 12,000         â”‚ â”‚ â”‚ å­¸å¹´ *    å­¸æœŸ *     â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ [2024-25â–¼] [ä¸Šå­¸æœŸâ–¼] â”‚ â”‚   â”‚
â”‚  â”‚ 2. é€Ÿåº¦è·³è¨“ç·´           â”‚ â”‚ â”‚                      â”‚ â”‚   â”‚
â”‚  â”‚    - 12 å ‚              â”‚ â”‚ â”‚ é–‹å§‹æ—¥æœŸ * çµæŸæ—¥æœŸ  â”‚ â”‚   â”‚
â”‚  â”‚    - HK$ 6,000          â”‚ â”‚ â”‚ [2024-09-09] [____]  â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚                      â”‚ â”‚   â”‚
â”‚  â”‚ ç¸½é‡‘é¡ï¼šHK$ 18,000      â”‚ â”‚ â”‚ æ‰€éœ€å°å¸« * æœ€å¤§å­¸ç”Ÿ  â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ [2_______] [25____]  â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚                      â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ æ”¶è²»æ¨¡å¼ *           â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ [å­¸ç”Ÿæ¯å ‚æ”¶è²»____â–¼]  â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚                      â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ å­¸ç”Ÿæ¯å ‚ å°å¸«æ¯å ‚    â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ [HK$50__] [HK$300_]  â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚                      â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ [âœ“ ç¢ºèªå»ºç«‹æ­¤èª²ç¨‹]   â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚                          â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ èª²ç¨‹ 2               â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â”‚ ...                  â”‚ â”‚   â”‚
â”‚  â”‚                         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚                       [ å–æ¶ˆ ] [ å»ºç«‹æ‰€æœ‰èª²ç¨‹ ]            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© ä½¿ç”¨çµ„ä»¶

### TailAdmin çµ„ä»¶

| çµ„ä»¶         | è·¯å¾‘                              | ç”¨é€”     |
| ------------ | --------------------------------- | -------- |
| `Input`      | `components/form/input/`          | è¡¨å–®è¼¸å…¥ |
| `Select`     | `components/form/Select.tsx`      | ä¸‹æ‹‰é¸æ“‡ |
| `DatePicker` | `components/form/date-picker.tsx` | æ—¥æœŸé¸æ“‡ |
| `Switch`     | `components/form/switch/`         | ç¢ºèªé–‹é—œ |
| `Modal`      | `components/ui/modal/`            | ç¢ºèªå½ˆçª— |

---

## ğŸ“Š è³‡æ–™çµæ§‹

### å ±åƒ¹è³‡æ–™ï¼ˆå”¯è®€ï¼‰

```typescript
interface QuotationForConvert {
  id: string;
  quotationNumber: string;
  school: {
    id: string;
    schoolName: string;
  };
  totalAmount: number;
  items: {
    id: string;
    courseName: string;
    courseType: CourseType;
    chargingModel: ChargingModel;
    unitPrice: number;
    quantity: number;
    totalPrice: number;
    lessonsPerWeek?: number;
    lessonDuration?: number;
    expectedStudents?: number;
    requiredTutors?: number;
  }[];
}
```

### èª²ç¨‹è¡¨å–®è³‡æ–™

```typescript
interface CourseFormData {
  quotationItemId: string; // é—œè¯çš„å ±åƒ¹é …ç›®
  confirmed: boolean; // æ˜¯å¦ç¢ºèªå»ºç«‹

  // èª²ç¨‹è³‡æ–™
  courseName: string;
  courseType: CourseType;
  courseTerm: CourseTerm;
  academicYear: string; // "2024-2025"

  // æ—¥æœŸè¨­å®š
  startDate: Date;
  endDate?: Date;

  // äººæ•¸è¨­å®š
  requiredTutors: number;
  maxStudents?: number;

  // æ”¶è²»è¨­å®š
  chargingModel: ChargingModel;
  studentPerLessonFee?: number;
  studentPerTermFee?: number;
  fixedPerLessonFee?: number;
  fixedPerTermFee?: number;

  // å°å¸«è–ªè³‡
  tutorPerLessonFee?: number;
}
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. å¾å ±åƒ¹é …ç›®é å¡«è¡¨å–®

```typescript
function mapQuotationItemToCourseForm(
  item: QuotationItem,
  defaults: { academicYear: string; startDate: Date }
): CourseFormData {
  return {
    quotationItemId: item.id,
    confirmed: false,

    courseName: item.courseName,
    courseType: item.courseType,
    courseTerm: "FIRST_TERM",
    academicYear: defaults.academicYear,

    startDate: defaults.startDate,
    endDate: undefined,

    requiredTutors: item.requiredTutors || 1,
    maxStudents: item.expectedStudents,

    chargingModel: item.chargingModel,
    studentPerLessonFee:
      item.chargingModel === "STUDENT_PER_LESSON" ? item.unitPrice : undefined,
    studentPerTermFee:
      item.chargingModel === "STUDENT_PER_TERM" ? item.unitPrice : undefined,
    fixedPerLessonFee:
      item.chargingModel === "FIXED_PER_LESSON" ? item.unitPrice : undefined,
    fixedPerTermFee:
      item.chargingModel === "FIXED_PER_TERM" ? item.unitPrice : undefined,

    tutorPerLessonFee: 300, // é è¨­å°å¸«è–ªè³‡
  };
}
```

### 2. æ”¶è²»æ¨¡å¼åˆ‡æ›

```tsx
function ChargingModelFields({
  chargingModel,
  formData,
  onChange,
}: ChargingModelFieldsProps) {
  const fields = {
    STUDENT_PER_LESSON: (
      <div className="grid grid-cols-2 gap-4">
        <div>
          <Label>å­¸ç”Ÿæ¯å ‚æ”¶è²» (HK$) *</Label>
          <Input
            type="number"
            value={formData.studentPerLessonFee || ""}
            onChange={(e) =>
              onChange({ studentPerLessonFee: Number(e.target.value) })
            }
          />
        </div>
        <div>
          <Label>å°å¸«æ¯å ‚è–ªè³‡ (HK$)</Label>
          <Input
            type="number"
            value={formData.tutorPerLessonFee || ""}
            onChange={(e) =>
              onChange({ tutorPerLessonFee: Number(e.target.value) })
            }
          />
        </div>
      </div>
    ),
    STUDENT_PER_TERM: (
      <div className="grid grid-cols-2 gap-4">
        <div>
          <Label>å­¸ç”Ÿæ¯å­¸æœŸæ”¶è²» (HK$) *</Label>
          <Input
            type="number"
            value={formData.studentPerTermFee || ""}
            onChange={(e) =>
              onChange({ studentPerTermFee: Number(e.target.value) })
            }
          />
        </div>
        <div>
          <Label>å°å¸«æ¯å ‚è–ªè³‡ (HK$)</Label>
          <Input
            type="number"
            value={formData.tutorPerLessonFee || ""}
            onChange={(e) =>
              onChange({ tutorPerLessonFee: Number(e.target.value) })
            }
          />
        </div>
      </div>
    ),
    FIXED_PER_LESSON: (
      <div className="grid grid-cols-2 gap-4">
        <div>
          <Label>å›ºå®šæ¯å ‚æ”¶è²» (HK$) *</Label>
          <Input
            type="number"
            value={formData.fixedPerLessonFee || ""}
            onChange={(e) =>
              onChange({ fixedPerLessonFee: Number(e.target.value) })
            }
          />
        </div>
        <div>
          <Label>å°å¸«æ¯å ‚è–ªè³‡ (HK$)</Label>
          <Input
            type="number"
            value={formData.tutorPerLessonFee || ""}
            onChange={(e) =>
              onChange({ tutorPerLessonFee: Number(e.target.value) })
            }
          />
        </div>
      </div>
    ),
    FIXED_PER_TERM: (
      <div>
        <Label>å›ºå®šæ¯å­¸æœŸæ”¶è²» (HK$) *</Label>
        <Input
          type="number"
          value={formData.fixedPerTermFee || ""}
          onChange={(e) =>
            onChange({ fixedPerTermFee: Number(e.target.value) })
          }
        />
      </div>
    ),
  };

  return fields[chargingModel] || null;
}
```

### 3. æ‰¹æ¬¡å»ºç«‹èª²ç¨‹

```typescript
// API: POST /api/quotations/[id]/convert
export async function POST(
  request: Request,
  { params }: { params: { id: string } }
) {
  const session = await getServerSession();

  if (!session?.user || session.user.role !== "ADMIN") {
    return Response.json({ error: "Forbidden" }, { status: 403 });
  }

  const body = await request.json();
  const { courses } = body as { courses: CourseFormData[] };

  // åªè™•ç†å·²ç¢ºèªçš„èª²ç¨‹
  const confirmedCourses = courses.filter((c) => c.confirmed);

  if (confirmedCourses.length === 0) {
    return Response.json({ error: "è«‹è‡³å°‘ç¢ºèªä¸€å€‹èª²ç¨‹" }, { status: 400 });
  }

  try {
    const result = await prisma.$transaction(async (tx) => {
      // ç²å–å ±åƒ¹è³‡æ–™
      const quotation = await tx.schoolQuotation.findUnique({
        where: { id: params.id },
        include: { school: true },
      });

      if (!quotation) {
        throw new Error("å ±åƒ¹ä¸å­˜åœ¨");
      }

      if (quotation.status !== "ACCEPTED") {
        throw new Error("åªèƒ½è½‰æ›å·²æ¥å—çš„å ±åƒ¹");
      }

      // å»ºç«‹èª²ç¨‹
      const createdCourses = await Promise.all(
        confirmedCourses.map(async (courseData) => {
          return tx.schoolCourse.create({
            data: {
              schoolId: quotation.schoolId,
              courseName: courseData.courseName,
              courseType: courseData.courseType,
              courseTerm: courseData.courseTerm,
              academicYear: courseData.academicYear,
              startDate: courseData.startDate,
              endDate: courseData.endDate,
              requiredTutors: courseData.requiredTutors,
              maxStudents: courseData.maxStudents,
              chargingModel: courseData.chargingModel,
              studentPerLessonFee: courseData.studentPerLessonFee,
              studentPerTermFee: courseData.studentPerTermFee,
              fixedPerLessonFee: courseData.fixedPerLessonFee,
              fixedPerTermFee: courseData.fixedPerTermFee,
              tutorPerLessonFee: courseData.tutorPerLessonFee,
              status: "ACTIVE",
            },
          });
        })
      );

      // æ›´æ–°å­¸æ ¡åˆä½œç‹€æ…‹ï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡åˆä½œï¼‰
      if (quotation.school.partnershipStatus !== "CONFIRMED") {
        await tx.school.update({
          where: { id: quotation.schoolId },
          data: {
            partnershipStatus: "CONFIRMED",
            partnershipStartDate: new Date(),
            partnershipStartYear: confirmedCourses[0].academicYear,
          },
        });
      }

      return {
        quotationId: quotation.id,
        createdCourses: createdCourses.map((c) => ({
          id: c.id,
          courseName: c.courseName,
        })),
      };
    });

    return Response.json(result);
  } catch (error) {
    console.error("è½‰æ›èª²ç¨‹å¤±æ•—:", error);
    return Response.json({ error: "è½‰æ›èª²ç¨‹å¤±æ•—" }, { status: 500 });
  }
}
```

---

## ğŸ’» ç¨‹å¼ç¢¼ç¯„ä¾‹

### é é¢ä¸»çµæ§‹

```tsx
// app/(private)/dashboard/school/quotations/[id]/convert/page.tsx
"use client";

import { useState, useEffect } from "react";
import { useRouter } from "next/navigation";
import useSWR from "swr";
import { PageBreadCrumb } from "@/components/common/PageBreadCrumb";
import { Modal } from "@/components/ui/modal";

export default function ConvertPage({ params }: { params: { id: string } }) {
  const router = useRouter();
  const { data: quotation, isLoading } = useSWR(
    `/api/quotations/${params.id}`,
    fetcher
  );

  const [courseForms, setCourseForms] = useState<CourseFormData[]>([]);
  const [showConfirmModal, setShowConfirmModal] = useState(false);
  const [isSubmitting, setIsSubmitting] = useState(false);

  // åˆå§‹åŒ–è¡¨å–®è³‡æ–™
  useEffect(() => {
    if (quotation?.items) {
      const currentYear = new Date().getFullYear();
      const academicYear = `${currentYear}-${currentYear + 1}`;

      setCourseForms(
        quotation.items.map((item: any) =>
          mapQuotationItemToCourseForm(item, {
            academicYear,
            startDate: new Date(),
          })
        )
      );
    }
  }, [quotation]);

  const handleCourseChange = (
    index: number,
    updates: Partial<CourseFormData>
  ) => {
    setCourseForms((prev) =>
      prev.map((form, i) => (i === index ? { ...form, ...updates } : form))
    );
  };

  const handleSubmit = async () => {
    const confirmedCount = courseForms.filter((c) => c.confirmed).length;

    if (confirmedCount === 0) {
      alert("è«‹è‡³å°‘ç¢ºèªä¸€å€‹èª²ç¨‹");
      return;
    }

    setIsSubmitting(true);

    try {
      const response = await fetch(`/api/quotations/${params.id}/convert`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ courses: courseForms }),
      });

      const result = await response.json();

      if (response.ok) {
        // è·³è½‰åˆ°ç¬¬ä¸€å€‹å»ºç«‹çš„èª²ç¨‹
        router.push(`/dashboard/school/courses/${result.createdCourses[0].id}`);
      } else {
        throw new Error(result.error);
      }
    } catch (error) {
      console.error("è½‰æ›å¤±æ•—:", error);
      alert("è½‰æ›å¤±æ•—ï¼Œè«‹é‡è©¦");
    } finally {
      setIsSubmitting(false);
      setShowConfirmModal(false);
    }
  };

  if (isLoading) {
    return <div className="p-8 text-center">è¼‰å…¥ä¸­...</div>;
  }

  if (!quotation || quotation.status !== "ACCEPTED") {
    return <div className="p-8 text-center text-red-500">æ­¤å ±åƒ¹ç„¡æ³•è½‰æ›</div>;
  }

  const confirmedCount = courseForms.filter((c) => c.confirmed).length;

  return (
    <div className="space-y-6">
      <PageBreadCrumb
        title="è½‰æ›ç‚ºèª²ç¨‹"
        items={[
          { label: "å ±åƒ¹ç®¡ç†", href: "/dashboard/school/quotations" },
          {
            label: quotation.quotationNumber,
            href: `/dashboard/school/quotations/${params.id}`,
          },
        ]}
      />

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* å·¦å´ï¼šå ±åƒ¹è³‡æ–™ */}
        <div className="lg:col-span-1">
          <div className="sticky top-6 rounded-xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-gray-900">
            <h3 className="font-semibold mb-4">åŸå ±åƒ¹è³‡æ–™</h3>

            <dl className="space-y-3 text-sm">
              <div>
                <dt className="text-gray-500">å ±åƒ¹ç·¨è™Ÿ</dt>
                <dd className="font-medium">{quotation.quotationNumber}</dd>
              </div>
              <div>
                <dt className="text-gray-500">å­¸æ ¡</dt>
                <dd className="font-medium">{quotation.school.schoolName}</dd>
              </div>
            </dl>

            <hr className="my-4 border-gray-200 dark:border-gray-700" />

            <h4 className="font-medium mb-3">å ±åƒ¹é …ç›®</h4>
            <ul className="space-y-3">
              {quotation.items.map((item: any, index: number) => (
                <li key={item.id} className="text-sm">
                  <div className="font-medium">
                    {index + 1}. {item.courseName}
                  </div>
                  <div className="text-gray-500">
                    {item.quantity} å ‚ Â· HK$ {item.totalPrice.toLocaleString()}
                  </div>
                </li>
              ))}
            </ul>

            <hr className="my-4 border-gray-200 dark:border-gray-700" />

            <div className="text-right">
              <span className="text-gray-500">ç¸½é‡‘é¡ï¼š</span>
              <span className="text-lg font-semibold ml-2">
                HK$ {quotation.totalAmount.toLocaleString()}
              </span>
            </div>
          </div>
        </div>

        {/* å³å´ï¼šèª²ç¨‹è¡¨å–® */}
        <div className="lg:col-span-2 space-y-6">
          {courseForms.map((form, index) => (
            <CourseConvertForm
              key={form.quotationItemId}
              index={index}
              data={form}
              originalItem={quotation.items[index]}
              onChange={(updates) => handleCourseChange(index, updates)}
            />
          ))}

          {/* æ“ä½œæŒ‰éˆ• */}
          <div className="flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700">
            <span className="text-sm text-gray-500">
              å·²ç¢ºèª {confirmedCount} / {courseForms.length} å€‹èª²ç¨‹
            </span>

            <div className="flex gap-3">
              <Button variant="outline" onClick={() => router.back()}>
                å–æ¶ˆ
              </Button>
              <Button
                variant="primary"
                onClick={() => setShowConfirmModal(true)}
                disabled={confirmedCount === 0}
              >
                å»ºç«‹ {confirmedCount} å€‹èª²ç¨‹
              </Button>
            </div>
          </div>
        </div>
      </div>

      {/* ç¢ºèª Modal */}
      <Modal
        isOpen={showConfirmModal}
        onClose={() => setShowConfirmModal(false)}
      >
        <div className="p-6">
          <h3 className="text-lg font-semibold mb-4">ç¢ºèªå»ºç«‹èª²ç¨‹</h3>
          <p className="text-gray-600 mb-6">
            å³å°‡å»ºç«‹ {confirmedCount} å€‹èª²ç¨‹ï¼Œç¢ºèªå—ï¼Ÿ
          </p>

          <ul className="mb-6 space-y-2">
            {courseForms
              .filter((c) => c.confirmed)
              .map((c, i) => (
                <li key={i} className="text-sm">
                  âœ“ {c.courseName}
                </li>
              ))}
          </ul>

          <div className="flex gap-3 justify-end">
            <Button
              variant="outline"
              onClick={() => setShowConfirmModal(false)}
            >
              å–æ¶ˆ
            </Button>
            <Button
              variant="primary"
              onClick={handleSubmit}
              disabled={isSubmitting}
            >
              {isSubmitting ? "å»ºç«‹ä¸­..." : "ç¢ºèªå»ºç«‹"}
            </Button>
          </div>
        </div>
      </Modal>
    </div>
  );
}
```

---

## âœ… é©—æ”¶æ¨™æº–

- [ ] åªæœ‰ ACCEPTED ç‹€æ…‹çš„å ±åƒ¹å¯é€²å…¥æ­¤é é¢
- [ ] å ±åƒ¹é …ç›®è‡ªå‹•é å¡«åˆ°èª²ç¨‹è¡¨å–®
- [ ] å¯ä¿®æ”¹èª²ç¨‹ç´°ç¯€ï¼ˆåç¨±ã€æ—¥æœŸã€æ”¶è²»ç­‰ï¼‰
- [ ] æ”¶è²»æ¨¡å¼åˆ‡æ›æ™‚é¡¯ç¤ºå°æ‡‰æ¬„ä½
- [ ] å¯é¸æ“‡æ€§ç¢ºèªè¦å»ºç«‹çš„èª²ç¨‹
- [ ] å¿…é ˆè‡³å°‘ç¢ºèªä¸€å€‹èª²ç¨‹æ‰èƒ½æäº¤
- [ ] å»ºç«‹æˆåŠŸå¾Œè·³è½‰åˆ°èª²ç¨‹è©³æƒ…é 
- [ ] å­¸æ ¡åˆä½œç‹€æ…‹è‡ªå‹•æ›´æ–°ç‚º CONFIRMED
